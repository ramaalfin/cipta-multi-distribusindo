<template>
    <div class="hyper-textarea">
        <textarea :placeholder="placeholder" :disabled="disabled" :value="modelValue" @input="$emit('update:modelValue', $event.target.value)" :style="{ resize }" v-bind="attributes" />
    </div>
</template>

<script>
import HyLoader from "./Loader.vue";

export default {
    name: "HyTextarea",
    props: {
        modelValue: String,
        placeholder: {
            type: String,
            default: "",
        },
        required: {
            type: Boolean,
            default: false,
        },
        disabled: {
            type: Boolean,
            default: false,
        },
        resize: {
            type: String,
            default: "vertical",
        },
    },
    computed: {
        attributes() {
            let attrs = { ...this.$attrs };

            // Delete attrs that shouldn't appear on the input element
            delete attrs.id;
            delete attrs.class;
            delete attrs.placeholder;
            delete attrs.required;
            delete attrs.disabled;
            delete attrs.resize;

            return attrs;
        },
    },
    components: {
        HyLoader,
    },
};
</script>

<style lang="scss">
.hyper-textarea {
    margin: var(--element-margin);
    position: relative;

    textarea {
        -moz-appearance: none;
        -webkit-appearance: none;
        appearance: none;

        background-color: var(--element-secondary-bg-color);
        border: var(--element-border-secondary);
        border-radius: var(--element-border-radius);
        padding: var(--element-padding);
        font-size: var(--font-size);
        font-family: var(--font-family);
        color: var(--font-color-dark);
        cursor: text;
        outline: none;
        width: 100%;
        max-width: 100%;
        min-height: 57px; // Approximately the height of an Input in a desktop viewport
        transition: var(--element-transition);
        transition-property: background-color, color, border, filter;
        box-shadow: var(--element-shadow);

        &:not([disabled]) {
            &:hover {
                background-color: var(--element-secondary-hover-bg-color);
            }

            &:focus {
                border: var(--element-border-accent);
            }
        }

        &:disabled {
            cursor: not-allowed;
            filter: opacity(50%);
        }
    }
}
</style>
